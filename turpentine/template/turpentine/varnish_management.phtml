<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     default_default
 * @copyright   Copyright (c) 2012 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<div class="content-header">
    <table cellspacing="0">
        <tr>
            <td>
                <h3><?php echo Mage::helper('turpentine')
                        ->__('Cache Management') ?></h3>
            </td>
            <td class="form-buttons"></td>
         </tr>
    </table>
</div>
<table class="form-list">
    <tr>
        <td class="scope-label">
            <button
                onclick="setLocation('<?php echo $this->getFlushAllUrl()?>')"
                type="button"
                class="scalable delete">
                <span><?php echo Mage::helper('turpentine')
                        ->__('Flush Varnish Cache') ?></span>
            </button>
        </td>
        <td class="scope-label">
            <?php echo Mage::helper('turpentine')
                ->__('Full Varnish cache flush.')?>
        </td>
    </tr>
    <tr>
        <form method="post" action="<?php echo $this->getFlushPartialUrl() ?>">
        <td class="scope-label">
            <button
                type="submit"
                class="scalable delete">
                <span>
                    <span>
                        <span><?php echo Mage::helper('turpentine')
                                ->__('Flush URL Pattern') ?></span>
                    </span>
                </span>
            </button>
        </td>
        <td class="scope-label">
            <input
                type="text"
                name="pattern"
                value=".*"
                class="input-text"
            </input>
            <br/>
            <?php echo Mage::helper('turpentine')
                ->__('Flush URLs that match a regular expression (relative to Magento base URL)') ?>
        </td>
         <input
            name="form_key"
            type="hidden"
            value="<?php echo Mage::getSingleton('core/session')->getFormKey() ?>" />
        </form>
    </tr>
    <tr>
        <form method="post" action="<?php echo $this->getFlushContentTypeUrl() ?>">
        <td class="scope-label">
            <button
                type="submit"
                class="scalable delete">
                <span>
                    <span>
                        <span><?php echo Mage::helper('turpentine')
                                ->__('Flush Content Type') ?></span>
                    </span>
                </span>
            </button>
        </td>
        <td class="scope-label">
            <input
                type="text"
                name="ctype"
                value="text/html"
                class="input-text"
            </input>
            <br/>
            <?php echo Mage::helper('turpentine')
                ->__('Flush cached objects with the given content (mime) type') ?>
        </td>
         <input
            name="form_key"
            type="hidden"
            value="<?php echo Mage::getSingleton('core/session')->getFormKey() ?>" />
        </form>
    </tr>
</table>
<div class="content-header">
    <table cellspacing="0">
        <tr>
            <td>
                <h3><?php echo Mage::helper('turpentine')
                        ->__('Config Management') ?></h3>
            </td>
            <td class="form-buttons"></td>
         </tr>
    </table>
</div>
<table class="form-list">
    <tr>
        <td class="scope-label">
            <button
                onclick="setLocation('<?php echo $this->getApplyConfigUrl()?>')"
                type="button"
                class="scalable save">
                <span>
                    <span>
                        <span><?php echo Mage::helper('turpentine')
                                ->__('Apply Varnish Config') ?></span>
                    </span>
                </span>
            </button>
        </td>
        <td class="scope-label">
            <?php echo Mage::helper('turpentine')
                ->__('Update the VCL configuration on the running Varnish instances')?>
        </td>
    </tr>
    <tr>
        <td class="scope-label">
            <button
                onclick="setLocation('<?php echo $this->getSaveConfigUrl()?>')"
                type="button"
                class="scalable save">
                <span>
                    <span>
                        <span><?php echo Mage::helper('turpentine')
                                ->__('Save Varnish Config') ?></span>
                    </span>
                </span>
            </button>
        </td>
        <td class="scope-label">
            <?php echo Mage::helper('turpentine')
                ->__('Save the configuration to a VCL file.')?>
        </td>
    </tr>
    <tr>
        <td class="scope-label">
            <button
                onclick="setLocation('<?php echo $this->getGetConfigUrl()?>')"
                type="button"
                class="scalable">
                <span>
                    <span>
                        <span><?php echo Mage::helper('turpentine')
                                ->__('Download Varnish Config') ?></span>
                    </span>
                </span>
            </button>
        </td>
        <td class="scope-label">
            <?php echo Mage::helper('turpentine')
                ->__('Download the generated VCL file.')?>
        </td>
    </tr>
</table>
<?php echo $this->getChildHtml(); ?>
